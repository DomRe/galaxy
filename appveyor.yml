version: 0.0.{build}-{branch}
branches: 
  only: 
    - master

shallow_clone: false
skip_tags: true
clone_depth: 1

image:
  - Visual Studio 2019

platform:
  - x86
  - x64

configuration:
  - Debug
  - Release

clone_script:
  - cmd: >-
      git clone -q --branch=%APPVEYOR_REPO_BRANCH% https://github.com/%APPVEYOR_REPO_NAME%.git %APPVEYOR_BUILD_FOLDER%
      && cd %APPVEYOR_BUILD_FOLDER%
      && git checkout -qf %APPVEYOR_REPO_COMMIT%
      && git submodule update --init --recursive

environment:
  matrix:
  - solution_name: modules/zlib/build-VS2019-MT/zlib.sln
  - solution_name: starmap.sln

build_script:
  - cmd: msbuild %solution_name%